<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Main Page</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>

<body>
  <nav class="cyan" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Euler's Method</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#">Euler's Method</a></li>
        <!--<li><a href="#">Integrating Factor Method</a></li>-->
        <li><a href="#">View ScreenCast</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="#">Euler's Method</a></li>
        <!--<li><a href="#">Integrating Factor Method</a></li>-->
        <li><a href="#">View ScreenCast</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>


    </div>
  </div>


  <div class="container">
    <div class="section">
      <?php
        $x = $_POST["InitialX"];
        $y = $_POST["InitialY"];
        $YArray = array();
        $XArray = array();
        array_push($YArray, $y);
        array_push($XArray, $x);
        $MaxIterations = $_POST["iterations"];
        $StepVal = $_POST["StepVal"];
        for ($i=0; $i < $MaxIterations ; $i++) {
          $x = $XArray[$i];
          $y = $YArray[$i];
          array_push($XArray, ($x+$StepVal));
          array_push($YArray, $y);
          DEGetter($x, $y);
        }

        function DEGetter($x, $y){
          $DeEquation = $_POST["DeEquation"]; // Get input from user in the previous page and gets sumbitted to this page
          $DEArray = array(); // Create an array to hold the equation
          for( $i = 0; $i < strlen( $DeEquation ); $i++ ) { // A for loop from 0 to the length of the Equation given by the user to append each character of the equation to the array = DeArray
              $char = substr( $DeEquation, $i, 1 ); // Gets the character at postion i on the string equation the user gave and appends it to the char Variable
              if ($char !== " "){ // Checks to make sure that the current value is not a blank space
                array_push($DEArray, $char); // if it isn't a blank space it appends that current characer that is temp stored in the char Var and appends it to the array
              }
              //$DEArray[] = $char; Potenital to redice time in appending to array using this later on?? Programming efficently
            }
           /*used if statement in for loop above instead/*for( $i = 0; $i < count( $DEArray ); $i++ ) {
            if ($DEArray[$i] == " ") {
              unset($DEArray[$i]);
            }

          }*/
          echo "<br><br> $DeEquation<br><br><br>";
          print_r($DEArray);
          Subtraction(Addition(Multiplication(Division(Indices(Brackets(Subtitute(DecimalPoint(Num($DEArray)), $x, $y), $x, $y))))));

          /*while (count($DEArray) > 1){
            $DeArray = Subtraction(Addition(Multiplication(Division(Indices(Subtitute( DecimalPoint(Num($DEArray)), $x, $y))))) );
          }*/
          //while $DEArray[$i + Stepper] !==
          /*$DigitArray = array( "0", "1", "2", "3", "4", "5", "6", "7", "8", "9");
          for( $i = 0; $i < count( $DEArray ); $i++ ) {
              $IntEnd = 0;
              $Stepper = 0;
              $NewChr = "";
              $CurrentIndex = 0;
              if ($DEArray[$i] == "."){
                $CurrentIndex = $DEArray[$i]  ;
                while (( in_array($DEArray[$CurrentIndex - 1 - $Stepper], $DigitArray)) AND ($CurrentIndex - 1 - $Stepper) >= 0){
                  $Stepper = $Stepper + 1;
                  $IntEnd = $CurrentIndex - $Stepper;
                }
                $Stepper = 0;
                for ($i = $IntEnd; $i < $CurrentIndex; ++$i) {
                  $NewChr = $NewChr + $DEArray[$i];
                }
                while ((in_array($DEArray[$CurrentIndex + 1 + $Stepper], $DigitArray)) AND ($CurrentIndex + 1 + $Stepper) <= (count($DEArray) - 1)){
                  if ($Stepper != count($DEArray) - 1){
                    $Stepper = $Stepper + 1;
                  }
                  $IntEnd = $CurrentIndex + $Stepper;
                }
                for (($i = $CurrentIndex); $i < ($IntEnd +1); ++$i) {
                  $NewChr = $NewChr + $DEArray[$i];
                }
                array_push($DEArray, $CurrentIndex-1);
                array_push($DEArray, $NewChr);
                for ($i = 0;  $i < strlen($NewChr); ++$i){
                  array_pop($DEArray, $CurrentIndex);
                  }
                $NewChr = "";
              }
            }*/
          }
          function MathMod(){
            $abs = abs();
            $acos = acos();
            $acosh = acosh();
            $asin = asin();
            $asinh = asinh();
            $atan = atan();
            $atanh = atanh();
            $cos = cos();
            $cosh = cosh();
            $exp = exp();
            $log10 = log10();
            $log = log();
            $pi = pi();
            $sin = sin();
            $sinh = sinh();
            $tan = tan();
            $tanh = tanh();
          }

        function Subtitute($DEArray, $x, $y){
          $Operators = array("^", "/", "*", "+", "-", "(", ")", "");
          $Character = 0;
          $WorkingArray = array();
          $NewChr = "";
          while ($Character < count($DEArray)) {
            if ($DEArray[$Character] === "x"){
              array_splice($DEArray, $Character, 1 , $x);
              if (!(in_array($DEArray[$Character-1], $Operators)) AND !(in_array($DEArray[$Character+1], $Operators))){
                /*array_splice($DEArray, $Character+1, 0 , ")");
                array_splice($DEArray, $Character, 0 , "*");
                array_splice($DEArray, $Character-1, 0 , "(");*/
                array_push($WorkingArray, "(");
                array_push($WorkingArray, $DEArray[$Character-1]);
                array_push($WorkingArray, "*");
                array_push($WorkingArray, $x);
                array_push($WorkingArray, ")");
                echo("<br><br> SubstWA: ");
                print_r($WorkingArray);
                $NewChr = Brackets($WorkingArray, $x, $y);
                array_splice($DEArray, $Character-1, 2 , $NewChr);
              }elseif ($DEArray[$Character-1] === "^"){
                array_push($WorkingArray, "(");
                array_push($WorkingArray, $x);
                array_push($WorkingArray, "*");
                array_push($WorkingArray, $DEArray[$Character+1]);
                array_push($WorkingArray, ")");
                $NewChr = Brackets($WorkingArray, $x, $y);
                array_splice($DEArray, $Character-1, 2 , $NewChr);
              }
            }elseif($DEArray[$Character] === "y"){
              array_splice($DEArray, $Character, 1 , $y);
              if (!(in_array($DEArray[$Character-1], $Operators)) AND !(in_array($DEArray[$Character+1], $Operators))){
                /*array_splice($DEArray, $Character+1, 0 , ")");
                array_splice($DEArray, $Character, 0 , "*");
                array_splice($DEArray, $Character-1, 0 , "(");*/
                array_push($WorkingArray, "(");
                array_push($WorkingArray, $DEArray[$Character-1]);
                array_push($WorkingArray, "*");
                array_push($WorkingArray, $y);
                array_push($WorkingArray, ")");
                echo("<br><br> SubstWA: ");
                print_r($WorkingArray);
                $NewChr = Brackets($WorkingArray, $x, $y);
                array_splice($DEArray, $Character-1, 2 , $NewChr);
              }elseif ($DEArray[$Character-1] === "^"){
                array_push($WorkingArray, "(");
                array_push($WorkingArray, $y);
                array_push($WorkingArray, "*");
                array_push($WorkingArray, $DEArray[$Character+1]);
                array_push($WorkingArray, ")");
                $NewChr = Brackets($WorkingArray, $x, $y);
                array_splice($DEArray, $Character-1, 2 , $NewChr);
              }
            }
            $Character = $Character + 1;
          }
          echo("<br><br>Subst:");
          print_r($DEArray);
          return($DEArray);
        }

        function Num($DEArray){
          $NewChr = "";
          $CurrentIndex = 0;
          $IntEnd = 0;
          $Stepper = 0;
          $Character = 0;
          while ($Character < count($DEArray)) {
            $Stepper = 0;
            if ((is_numeric($DEArray[$Character])) AND (is_numeric($DEArray[$Character+1]))){
                  $CurrentIndex = $Character;
                  while ((is_numeric($DEArray[$CurrentIndex + 1 + $Stepper]))){
                    $Stepper = $Stepper + 1;
                    $IntEnd = $CurrentIndex + $Stepper;
                  }
                  for ($i = $CurrentIndex; $i < $IntEnd+1; $i++){
                    $NewChr = $NewChr.$DEArray[$i];
                  }
                  array_splice($DEArray, $IntEnd+1, 0 , $NewChr);
                  array_splice($DEArray, $Character, $IntEnd - $Character+1);
                  /*if (in_array($DEArray[count($DEArray)-1], $DigitArray)){ //but then we have to fix it when it doesn't concatenate if the thing is a float with only 1 dp at the end
                    if (strpos(".", $DEArray[count($DEArray)-2]) AND is_numeric($DEArray[count($DEArray)-2])){
                          $NewChr = $DEArray[count($DEArray)-2] + $DEArray[count($DEArray)-1];
                          array_pop($DEArray);
                          array_pop($DEArray);
                          array_push($DEArray, $NewChr);
                      }
                  print_r($DEArray);
                }*/
              }
                $Character = $Character + 1;
                $NewChr = "";
              }
              echo("<br><br>Nums:");
              print_r($DEArray);
              return($DEArray);
            }

        function DecimalPoint($DEArray){
          print_r($DEArray);
          $Character = 0;
          $NewChr = "";
          while ($Character < count($DEArray)) {
            if ((is_numeric($DEArray[$Character])) AND ($DEArray[$Character+1] === ".") AND (is_numeric($DEArray[$Character+2]))){
              $NewChr = $DEArray[$Character].$DEArray[$Character+1].$DEArray[$Character+2];
              array_splice($DEArray, $Character, 3 , $NewChr);
            }
            $Character = $Character + 1;
          }
          echo("<br><br>DP:");
          print_r($DEArray);
          return($DEArray);
        }

        function Brackets($DEArray, $x, $y){
          if (($DEArray[0] === "(" ) AND ($DEArray[count($DEArray) - 1] === ")" )) {
            echo("Running new code thing...");
            for ($i=1; $i < count($DEArray) - 1; $i++) {
              echo("<br>i: $i");
              $NewChr = $DEArray[$i];
              echo("<br>array: $NewChr");
              if ($DEArray[$i] === ")" ){
                echo("<br>I broke");
                break;
              } else {
                echo("<br><br>Start: ");
                print_r($DEArray);
                array_splice($DEArray, 0, 1);
                echo("<br><br>Step 1: ");
                print_r($DEArray);
                array_splice($DEArray, count($DEArray) - 1, 1);
                echo("<br><br>Step 2: ");
                print_r($DEArray);
                $NewChr = Subtraction(Addition(Multiplication(Division(Indices(Brackets($DEArray, $x, $y)))))); // array doesnt exist
                echo "<br>NewChr = ";
                print_r($NewChr);
                array_splice($DEArray, 0, count($DEArray), $NewChr);
                break;
              }
            }
          } else {
            $a = 0;
            while($a < count($DEArray)){
              $WorkingArray = array();
              $NewChr = "";
              if ($DEArray[$a] == "(") {
                $Stepper = 0;
                $b = $a + $Stepper + 1;
                while (($DEArray[$b] != ")") AND ($b < count($DEArray))){
                  $Stepper = $Stepper + 1;
                  $b = $b + $Stepper;
                }
                for ($c = $a+1; $c < $b; $c++){
                  $Abcdefd = $DEArray[$c];
                  echo "<br><br>DEARRAY[C] $Abcdefd";
                  array_push($WorkingArray, $DEArray[$c]);
                  echo("<br><br>BracWA:");
                  print_r($WorkingArray);
                  echo("<br><br>BracDEA:");
                  print_r($DEArray);
                }
                $NewChr = Subtraction(Addition(Multiplication(Division(Indices(Brackets($WorkingArray, $x, $y))))));
                echo "<br>NewChr = $NewChr";
                array_splice($DEArray, $a, $b-$a+1, $NewChr);
              }
              $a = $a + 1;
            }
          }

          /*$a = 0;
          $b = 0;
          while($a < count($DEArray)){
            $WorkingArray = array();
            $NewChr = "";
            if (($DEArray[0] === "(") AND ($DEArray[count($DEArray)-1] === ")")){
              echo("<br><br> This bit is executuing now!!!! <br>");
              $WorkingArray = $DEArray;
              array_splice($WorkingArray, 0, 1);
              echo("<br> Working Array 1: ");
              print_r($WorkingArray);
              array_splice($WorkingArray, count($WorkingArray)-1, 1);
              echo("<br> Working Array 2: ");
              print_r($WorkingArray);
              if ((!in_array("(", $WorkingArray)) AND (!in_array(")", $WorkingArray))){// this if sttement doesn't execute
                $a = 0;
                $b = count($DEArray)-1;
              } else {
                $Stepper = 0;
                $b = $a + $Stepper + 1;
                while (($DEArray[$b] != ")") AND ($b < count($DEArray))){
                  $Stepper = $Stepper + 1;
                  $b = $b + $Stepper;
                }
              }
              echo("<br><br>b = $b");
              for ($c = $a+1; $c < $b; $c++){
                $Abcdefd = $DEArray[$c];
                echo "<br><br>DEARRAY[C] $Abcdefd";
                array_push($WorkingArray, $DEArray[$c]);
                echo("<br><br>BracWA:");
                print_r($WorkingArray);
                echo("<br><br>BracDEA:");
                print_r($DEArray);
              }
              $NewChr = Subtraction(Addition(Multiplication(Division(Indices(Brackets($WorkingArray, $x, $y))))));
              //echo "<br>NewChr = $NewChr";
              array_splice($DEArray, $a, $b-$a+1, $NewChr);
              $a = $a + 1;
              $WorkingArray = array();
            }elseif ($DEArray[$a] === "(") {
              $Stepper = 0;
              $b = $a + $Stepper + 1;
              while (($DEArray[$b] != ")") AND ($b < count($DEArray))){
                $Stepper = $Stepper + 1;
                $b = $b + $Stepper;
              }
              echo("<br><br>b = $b");
              for ($c = $a+1; $c < $b; $c++){
                $Abcdefd = $DEArray[$c];
                echo "<br><br>DEARRAY[C] $Abcdefd";
                array_push($WorkingArray, $DEArray[$c]);
                echo("<br><br>BracWA:");
                print_r($WorkingArray);
                echo("<br><br>BracDEA:");
                print_r($DEArray);
              }
              $NewChr = Subtraction(Addition(Multiplication(Division(Indices(Brackets($WorkingArray, $x, $y))))));
              //echo "<br>NewChr = $NewChr";
              array_splice($DEArray, $a, $b-$a+1, $NewChr);
              $a = $a + 1;
            }/*else{
              array_splice($DEArray, 0, 0, );
            }
          }*/
          echo("<br><br>Brackets:");
          print_r($DEArray);
          return($DEArray);
        }

        function Indices($DEArray){
          $Character = 0;
          $NewChr = "";
          while ($Character < count($DEArray)) {
            if ($DEArray[$Character] === "^"){
              $NewChr = pow($DEArray[$Character-1], $DEArray[$Character+1]);
              array_splice($DEArray, $Character-1, 3 , $NewChr);
              $Character = 0;
            }
            $Character = $Character + 1;
          }
          echo("<br><br>Indices:");
          print_r($DEArray);
          return($DEArray);
        }

        function Division($DEArray){
          $Character = 0;
          $NewChr = "";
          while ($Character < count($DEArray)) {
            if ($DEArray[$Character] === "/"){
              $NewChr = (floatval($DEArray[$Character-1])/floatval($DEArray[$Character+1]));
              array_splice($DEArray, $Character-1, 3 , $NewChr);
              $Character = 0;
            }
            $Character = $Character + 1;
          }
          echo("<br><br>Div:");
          print_r($DEArray);
          return($DEArray);
        }

        function Multiplication($DEArray){
          $Character = 0;
          $NewChr = "";
          while ($Character < count($DEArray)) {
            //echo("<br>");
            //print_r($DEArray);
            //echo("<br>");
            if ($DEArray[$Character] === "*"){
              $NewChr = floatval(($DEArray[$Character-1])*floatval($DEArray[$Character+1]));
              array_splice($DEArray, $Character-1, 3 , $NewChr);
              $Character = 0;
            }elseif (($DEArray[$Character]==="0") OR ($DEArray[$Character+1]==="0")){
              array_splice($DEArray, $Character, 2 , 0);
              $Character = 0;
            }elseif ((is_numeric($DEArray[$Character])) AND (is_numeric($DEArray[$Character+1]))) {
              $NewChr = (floatval($DEArray[$Character])*floatval($DEArray[$Character+1]));
              array_splice($DEArray, $Character, 2 , $NewChr);
              $Character = 0;
            }
            //echo("<br>");
            //print_r($DEArray);
            //echo("<br>");
            $Character = $Character + 1;
          }
          echo("<br><br>Mul:");
          print_r($DEArray);
          return($DEArray);

        }
        function Addition($DEArray){
          $Character = 0;
          $NewChr = "";
          while ($Character < count($DEArray)) {
            if ($DEArray[$Character] === "+"){
              $NewChr = (floatval($DEArray[$Character-1])+floatval($DEArray[$Character+1]));
              array_splice($DEArray, $Character-1, 3 , $NewChr);
              $Character = 0;
            }
            $Character = $Character + 1;
          }
          echo("<br><br>Add:");
          print_r($DEArray);
          return($DEArray);

        }
        function Subtraction($DEArray){
          $Character = 0;
          $NewChr = "";
          if ($DEArray[0] === "-"){
            $NewChr = $DEArray[0].$DEArray[1];
            array_splice($DEArray, 0 , 2, $NewChr);
            $NewChr = "";
          }

          while ($Character < count($DEArray)) {
            if ($DEArray[$Character] === "-"){
              $NewChr = ($DEArray[$Character-1]-$DEArray[$Character+1]);
              array_splice($DEArray, $Character-1, 3 , $NewChr);
              $Character = 0;
            }
            $Character = $Character + 1;
          }
          echo("<br><br>Subtr:");
          print_r($DEArray);
          return($DEArray);
        }
      ?>



        </div>
        <form class="col s12" method="post">
          <div class="row">
            <div class="input-field col s12">
              <input id="DeEquation" type="text" class="validate" name="DeEquation">
              <label for="DeEquation">Differential Equation f(x, y)</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s6">
              <input id="InitialX" type="text" class="validate" name="InitialX">
              <label for="InitialX">Initial X Value</label>
            </div>
            <div class="input-field col s6">
              <input id="InitialY" type="text" class="validate" name="InitialY">
              <label for="InitialY">Initial Y Value</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="StepVal" type="text" class="validate" name="StepVal">
              <label for="StepVal">Step Value</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="iterations" type="text" class="validate" name="iterations">
              <label for="iterations">Number Of Iterations</label>
            </div>
          </div>
  <div class="grid-example col s12">
                        <button onclick="__doPostBack('ctl00$body$ctl01','')" class="btn waves-effect waves-light" style="display: block; width: 100%;" type="submit" name="action">
                            Submit
                            <i class="mdi-content-send right"></i>
                        </button>
                    </div>
                </div>
      </div>

    </div>
    <br><br>

    <div class="section">

    </div>
  </div>

  <footer class="page-footer cyan lighten-2">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Information</h5>
          <p class="grey-text text-lighten-4">...<br>...<br>...</p>


        </div>
        <div class="col l5 s12 right">
          <h5 class="white-text">Navigation</h5>
          <ul>
            <li><a class="white-text" href="#!">About</a></li>
            <li><a class="white-text" href="#!">Euler's Method</a></li>
            <!--<li><a class="white-text" href="#!">Integrating Factor Method</a></li> -->
            <li><a class="white-text" href="#!">View ScreenCast</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      Made by <a class="yellow-text text-lighten-3" href="http://www.vivek-mehta.com">Vivek Mehta</a>
      </div>
    </div>
  </footer>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  </body>
</html>
